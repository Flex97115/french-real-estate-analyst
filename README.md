# French Real Estate analyst

## Description

Based on ["Guide Immobilier Français"](https://chat.openai.com/g/g-pvFD7rFiN-guide-immobilier-france), 
this application is more precise and customizable than the one available on OpenAI.

This application answers questions about the French real estate market.

#### What's better ?
- Better understanding of the user's needs
- More precise answers
- Can add custom data to the csv file and write custom descriptions of the data in `description.yml` file
- Fewer errors when generating the data
- Faster than the OpenAI's GPTs

## What's in the box ?
An ETL process generates a csv file containing data on the French real estate market from **2018 to 2023**.

All the data generated by the ETL process will be saved in `ressources` folder.

The main application use [crewAI](https://github.com/joaomdmoura/crewAI) and GPT-4 to answer your questions.

## How does it work ?

After the ETL process, the application will use the csv file to answer your questions.

It's create a vector database with your custom description located in `description.yml` 
and the official PDF notice downloaded from the [French government website](https://www.data.gouv.fr/fr/datasets/demandes-de-valeurs-foncieres/).


Then there is two agent created with crewAI library :

1. The CSV Inspector, which helps identify the columns and data in the csv file using the vector database and CSV data. It then passes this information to the second agent.
2. The Real Estate Analyst, which, based on the column descriptions provided by the CSV Inspector, has a better understanding of the data and can answer more precise questions.

## How to use it ?

1. Clone the repository
2. Install the requirements in `etl/requirements.txt`
3. Run the ETL process
4. Add the environment variable `OPENAI_API_KEY` in your system or in a .env file 
5. Install requirements in `requirements.txt`
6. Run the application from `main.py` file


# Examples

## Question
**Quel sont les 5 dernières ventes réalisées avenue de lombez à Toulouse ?**

### CSV inspector response

```
The CSV file contains the following columns:

1. 'Valeur foncière': This column represents the value of the property.
2. 'N° de voie': This column represents the number of the road where the property is located.
3. 'Voie': This column represents the name of the road where the property is located.
4. 'Code voie': This column represents the code of the road where the property is located.
5. 'Code postal': This column represents the postal code of the property.
6. 'Commune': This column represents the name of the commune where the property is located.
7. 'Nombre de lots': This column represents the number of lots in the property.
8. 'Code type local': This column represents the code of the type of the property.
9. 'Type local': This column represents the type of the property.
10. 'Surface réelle bâti': This column represents the actual built-up area of the property.
11. 'Nombre de pièces principales': This column represents the number of main rooms in the property.
12. 'Surface terrain': This column represents the surface area of the land of the property.
13. 'longitude': This column represents the longitude of the property.
14. 'latitude': This column represents the latitude of the property.
15. 'Date de mutation': This column represents the date of transfer of the property.
16. 'Annee': This column represents the year of transfer of the property.
17. 'Jour': This column represents the day of transfer of the property.
18. 'Mois': This column represents the month of transfer of the property.
19. 'Column1': This column represents the timestamp of the data entry.
20. 'Arrondissement': This column represents the district of the property.
```

### Real estate analyst response

```
Here are the last 5 sales made at avenue de lombez in Toulouse:

1. On 2023-06-30, a property located at 9 avenue de lombez in Toulouse was sold. The property was an Appartement with a built-up area of 8 square meters and 1 main room. The property was sold for 117000 euros.
2. On 2023-06-28, a property located at 65 avenue de lombez in Toulouse was sold. The property was an Appartement with a built-up area of 71 square meters and 2 main rooms. The property was sold for 1067000 euros.
3. On 2023-05-26, a property located at 9 avenue de lombez in Toulouse was sold. The property was an Appartement with a built-up area of 49 square meters and 3 main rooms. The property was sold for 332500 euros.
4. On 2023-06-22, a property located at 27 avenue de lombez in Toulouse was sold. The property was an Appartement with a built-up area of 93 square meters and 2 main rooms. The property was sold for 898000 euros.
5. On 2023-06-12, a property located at 1 avenue de lombez in Toulouse was sold. The property was an Appartement with a built-up area of 79 square meters and 4 main rooms. The property was sold for 545000 euros.
```

## Question
**Quel est le prix moyen d'un appartement dans le 19 ème à Paris ?**

### Real estate analyst response

```
The average price of an apartment in the 19th arrondissement of Paris is approximately €537,500.
```
